from telegram import Update
from telegram.ext import ContextTypes, CommandHandler
from util import load_users, save_users

async def start_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """Handle /start command and store user ID"""
    user = update.effective_user
    
    users = load_users()
    
    if str(user.id) not in users:
        users.append(str(user.id))
        save_users(users)
        message = (
            "âœ¦ ğ— ğ—¶ğ˜‡ğ˜‚ğ—¸ğ—¶ ğ—•ğ—¼ğ˜ ğ—®ğ˜ ğ˜†ğ—¼ğ˜‚ğ—¿ ğ˜€ğ—²ğ—¿ğ˜ƒğ—¶ğ—°ğ—²! âœ¦\n\n"
            "I ğ—®ğ—º ğ˜ğ—µğ—² ğ—½ğ—¿ğ—¼ğ˜‚ğ—± ğ—¯ğ—¼ğ˜ ğ—¼ğ—³ ğ˜ğ—µğ—² ğ—”ğ—»ğ—¶ğ—ºğ—² ğ—¢ğ—°ğ—²ğ—®ğ—» ğ—°ğ—¼ğ—ºğ—ºğ˜‚ğ—»ğ—¶ğ˜ğ˜†.\n"
            "ğ— ğ˜† ğ—ºğ—®ğ—¶ğ—» ğ—±ğ˜‚ğ˜ğ˜† ğ—¶ğ˜€ ğ˜ğ—¼ ğ—¸ğ—²ğ—²ğ—½ ğ˜ğ—µğ—² ğ—°ğ—µğ—®ğ—»ğ—»ğ—²ğ—¹ âŸª @Animes_News_Ocean âŸ« ğ—³ğ—¶ğ—¹ğ—¹ğ—²ğ—± ğ˜„ğ—¶ğ˜ğ—µ ğ—³ğ—¿ğ—²ğ˜€ğ—µ ğ—®ğ—»ğ—¶ğ—ºğ—², ğ—ºğ—®ğ—»ğ—´ğ—®, ğ—ºğ—®ğ—»ğ—µğ˜„ğ—® ğ—®ğ—»ğ—± ğ—¹ğ—¶ğ—´ğ—µğ˜ ğ—»ğ—¼ğ˜ƒğ—²ğ—¹ ğ—»ğ—²ğ˜„ğ˜€!\n\n"
            "â‹† ğ—¥ğ—¶ğ—´ğ—µğ˜ ğ—»ğ—¼ğ˜„, ğ—œ ğ—³ğ—¼ğ—¿ğ˜„ğ—®ğ—¿ğ—± ğ—®ğ—¹ğ—¹ ğ˜ğ—µğ—² ğ—¹ğ—®ğ˜ğ—²ğ˜€ğ˜ ğ˜‚ğ—½ğ—±ğ—®ğ˜ğ—²ğ˜€ ğ˜€ğ˜ğ—¿ğ—®ğ—¶ğ—´ğ—µğ˜ ğ˜ğ—µğ—²ğ—¿ğ—².\n"
            "ğ—•ğ˜‚ğ˜ ğ—µğ—²ğ˜†, ğ—œ ğ˜„ğ—®ğ—»ğ˜ ğ˜†ğ—¼ğ˜‚ğ—¿ ğ—¼ğ—½ğ—¶ğ—»ğ—¶ğ—¼ğ—»!\n"
            "ğ—¦ğ—µğ—¼ğ˜‚ğ—¹ğ—± ğ—œ ğ—®ğ—¹ğ˜€ğ—¼ ğ—³ğ—¼ğ—¿ğ˜„ğ—®ğ—¿ğ—± ğ—»ğ—²ğ˜„ğ˜€ ğ—±ğ—¶ğ—¿ğ—²ğ—°ğ˜ğ—¹ğ˜† ğ—¶ğ—»ğ˜ğ—¼ ğ˜†ğ—¼ğ˜‚ğ—¿ ğ—´ğ—¿ğ—¼ğ˜‚ğ—½ğ˜€?\n\n"
            "ğ—œğ—³ ğ˜†ğ—²ğ˜€, ğ—½ğ—¹ğ—²ğ—®ğ˜€ğ—² ğ˜‚ğ˜€ğ—² ğ˜ğ—µğ—² /upvote ğ—°ğ—¼ğ—ºğ—ºğ—®ğ—»ğ—±!\n"
            "ğ—¢ğ—»ğ—°ğ—² ğ—œ ğ—¿ğ—²ğ—®ğ—°ğ—µ ğŸ­ğ— ğ˜‚ğ—½ğ˜ƒğ—¼ğ˜ğ—²ğ˜€, ğ—œ ğ˜„ğ—¶ğ—¹ğ—¹ ğ—´ğ—²ğ˜ ğ—® ğ—ºğ—®ğ—·ğ—¼ğ—¿ ğ˜‚ğ—½ğ—´ğ—¿ğ—®ğ—±ğ—² ğ—®ğ—»ğ—± ğ—¯ğ—² ğ—®ğ—¯ğ—¹ğ—² ğ˜ğ—¼ ğ—³ğ—¼ğ—¿ğ˜„ğ—®ğ—¿ğ—± ğ—»ğ—²ğ˜„ğ˜€ ğ—±ğ—¶ğ—¿ğ—²ğ—°ğ˜ğ—¹ğ˜† ğ—¶ğ—»ğ˜ğ—¼ ğ˜†ğ—¼ğ˜‚ğ—¿ ğ—´ğ—¿ğ—¼ğ˜‚ğ—½ğ˜€ ğ˜ğ—¼ğ—¼!\n\n"
            "â¤ ğ——ğ—¼ğ—»â€™ğ˜ ğ˜„ğ—¼ğ—¿ğ—¿ğ˜†, ğ—œâ€™ğ—¹ğ—¹ ğ—¶ğ—»ğ—³ğ—¼ğ—¿ğ—º ğ˜†ğ—¼ğ˜‚ ğ—¼ğ—»ğ—°ğ—² ğ˜ğ—µğ—² ğ—»ğ—²ğ˜„ ğ˜ƒğ—²ğ—¿ğ˜€ğ—¶ğ—¼ğ—» ğ—¶ğ˜€ ğ—¿ğ—²ğ—®ğ—±ğ˜†.\n\n"
            "â˜† ğ—§ğ—µğ—®ğ—»ğ—¸ğ˜€ ğ—³ğ—¼ğ—¿ ğ—¯ğ—²ğ—¶ğ—»ğ—´ ğ—µğ—²ğ—¿ğ—². ğ—¦ğ˜ğ—®ğ˜† ğ˜ğ˜‚ğ—»ğ—²ğ—±, ğ—²ğ˜…ğ—°ğ—¶ğ˜ğ—¶ğ—»ğ—´ ğ˜ğ—¶ğ—ºğ—²ğ˜€ ğ—®ğ—µğ—²ğ—®ğ—±!\n\n"
            "ğ—¡ğ—²ğ—²ğ—± ğ˜€ğ˜‚ğ—½ğ—½ğ—¼ğ—¿ğ˜? ğ—–ğ—¼ğ—»ğ˜ğ—®ğ—°ğ˜: @suu_111"
        )
    
    await update.message.reply_text(message)

def get_start_handler():
    return CommandHandler("start", start_command)